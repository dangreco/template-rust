root := `git rev-parse --show-toplevel`

_default:
    @just --list

_root:
    @echo {% raw %}{{ root }}{% endraw %}

_runtimes:
    @{{ root }}{% endraw %}/.scripts/runtimes.sh

act *args:
    @{% raw %}{{ root }}{% endraw %}/.scripts/act.sh {% raw %}{{ args }}{% endraw %}

{% if crate_type == "bin" %}
run:
    @cargo run

run-release:
    @cargo run --release

build:
    @cargo build

build-release:
    @cargo build --release

{% endif %}
test:
    @cargo test --workspace --all-targets --all-features -- --nocapture

test-release:
    @cargo test --release --workspace --all-targets --all-features -- --nocapture

check:
    @cargo check

check-release:
    @cargo check --release

fmt:
    @cargo fmt --all

fmt-check:
    @cargo fmt --all -- --check

clippy:
    @cargo clippy --workspace --all-targets --all-features
